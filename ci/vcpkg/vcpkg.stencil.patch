From b3839b7147901a4efb0122c2bcb5e78094f1f1e3 Mon Sep 17 00:00:00 2001
From: "Ankur Verma (SF)" <ankurv@corp.microsoft.com>
Date: Tue, 28 Apr 2020 14:34:05 -0700
Subject: [PATCH] stencil

---
 ports/stencil/CONTROL        |  3 +++
 ports/stencil/portfile.cmake | 34 ++++++++++++++++++++++++++++++++++
 2 files changed, 37 insertions(+)
 create mode 100644 ports/stencil/CONTROL
 create mode 100644 ports/stencil/portfile.cmake

diff --git a/ports/stencil/CONTROL b/ports/stencil/CONTROL
new file mode 100644
index 000000000..bce9ca81c
--- /dev/null
+++ b/ports/stencil/CONTROL
@@ -0,0 +1,3 @@
+Source: stencil
+Version: 0.0.1
+Description: Code Generator based on Model Template binding Transformations
diff --git a/ports/stencil/portfile.cmake b/ports/stencil/portfile.cmake
new file mode 100644
index 000000000..7bfa94e68
--- /dev/null
+++ b/ports/stencil/portfile.cmake
@@ -0,0 +1,34 @@
+if (DEFINED ENV{VCPKG_USE_STENCIL_SRC_DIR})
+    execute_process(COMMAND ${CMAKE_COMMAND} -E copy_directory ${ENV{VCPKG_USE_STENCIL_SRC_DIR}} ${SOURCE_PATH})
+else()
+    set(commitId d90c8ca66dfab505800c78299079204e9510982b)
+    set(sha512 280c8a8e7fe5e47a86b0f5e9b2017b6be02b244eee1ef5f724fb7f2392684675604733a9dce6dcd79ef4392c8a15b312a452af7735ca2d5165710e39a6ad6692)
+    if (DEFINED ENV{VCPKG_USE_STENCIL_COMMIT})
+        set(commit ${ENV{VCPKG_USE_STENCIL_COMMIT}}
+    endif()
+    if (DEFINED ENV{VCPKG_USE_STENCIL_SHA512})
+        set(sha512 ${ENV{VCPKG_USE_STENCIL_SHA512}}
+    endif()
+    vcpkg_from_github(
+        OUT_SOURCE_PATH SOURCE_PATH
+        REPO ankurverma85/stencil
+        REF ${commitId}
+        SHA512 ${sha512}
+        HEAD_REF master
+    )
+endif()
+
+vcpkg_configure_cmake(
+    SOURCE_PATH ${SOURCE_PATH}
+    PREFER_NINJA
+    OPTIONS -DSTENCIL_INSTALL_BUILDTOOLS=ON
+)
+
+vcpkg_install_cmake()
+vcpkg_copy_pdbs()
+
+# Handle copyright
+file(INSTALL ${SOURCE_PATH}/LICENSE DESTINATION ${CURRENT_PACKAGES_DIR}/share/${PORT} RENAME copyright)
+file(REMOVE_RECURSE "${CURRENT_PACKAGES_DIR}/debug")
+file(RENAME "${CURRENT_PACKAGES_DIR}/bin" "${CURRENT_PACKAGES_DIR}/tools")
+
-- 
2.17.1.windows.2

